{% extends 'orders/base.html' %}
{% load static %}
{% block title %}Cart{% endblock %}
{% block content %}

{% if user.is_authenticated %}
    <div class="center_text"><h1 style="color: #239346; font-weight: bold">Your Cart</h1>
    {% if not cart %}
        <h3 style="font-weight: bold;">Empty cart</h3></div>
    {% else %}
        {% for item in cart %}
            <div class="row justify-content-center">
                <div class="col col-8 col-sm-8 col-md-6 col-lg-5 text-left">
                    <h4>{{ item.food }}</h4>
                    {% if item.toppings.all %}
                        <ul style="font-size: 20px;">
                            {% for topping in item.toppings.all %}
                                <li>{{ topping }} </li>
                            {% endfor %}
                        </ul>
                   {% endif %}
                </div>
                <div class="col-3 col-sm-3 col-md-2 col-lg-2 text-left">
                    <form action="{% url 'delete' %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="order_id" value="{{ item.id }}"/>
                        <button type="submit">x</button>
                    </form>
                </div>
            </div>
        {% endfor %}
        <br>
        <div class="center_text">
        <h2 style="font-weight: bold;">Total {{ total }} $</h2>
        <br>
        <form action="{% url 'checkout' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn-lg btn-success">Order</button>
            <br>
            <br>
        </form>
        <form action="{% url 'delete' %}" method="post">
            {% csrf_token %}
            <input type="hidden" name="order_id" value="{{ order.id }}"/>
            <button type="submit" class="btn btn-danger">Cancel</button>
        </form>
    {% endif %}
</div>
{% endif %}
{% endblock %}
